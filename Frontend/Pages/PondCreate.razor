@page "/pondCreate"
@inject IPondService PondService
@inject NavigationManager Navigation
@using KoiFishManager.Models

<h3>Tạo Hồ Cá Mới</h3>

<EditForm Model="@newPond" OnValidSubmit="OnCreatePond">
    <DataAnnotationsValidator />
    <ValidationSummary />

    <div class="form-group" style="margin-bottom: 10px">
        <label for="name">Tên hồ</label>
        <InputText id="name" class="form-control" @bind-Value="newPond.Name" />
    </div>
    
    <div class="form-group" style="margin-bottom: 10px">
        <label for="size">Kích thước (m²)</label>
        <InputNumber id="size" class="form-control" @bind-Value="newPond.Size" />
    </div>
    
    <div class="form-group" style="margin-bottom: 10px">
        <label for="depth">Độ sâu (m)</label>
        <InputNumber id="depth" class="form-control" @bind-Value="newPond.Depth" />
    </div>
    
    <div class="form-group" style="margin-bottom: 10px">
        <label for="waterQuality">Chất lượng nước</label>
        <InputText id="waterQuality" class="form-control" @bind-Value="newPond.WaterQuality" />
    </div>
    
    <button type="submit" class="btn btn-success">Tạo hồ</button>
</EditForm>

@code {
    private PondRequest newPond = new PondRequest();

    private async Task OnCreatePond()
    {
        try
        {
            await PondService.CreatePondAsync(newPond);
            Navigation.NavigateTo("/ponds"); // Redirect to pond list after creation
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error creating pond: {ex.Message}");
        }
    }
}
