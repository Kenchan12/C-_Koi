-- DROP SCHEMA public;

CREATE SCHEMA public AUTHORIZATION "pqh.sony";

-- DROP SEQUENCE "AspNetRoleClaims_Id_seq";

CREATE SEQUENCE "AspNetRoleClaims_Id_seq"
	INCREMENT BY 1
	MINVALUE 1
	MAXVALUE 2147483647
	START 1
	CACHE 1
	NO CYCLE;
-- DROP SEQUENCE "AspNetUserClaims_Id_seq";

CREATE SEQUENCE "AspNetUserClaims_Id_seq"
	INCREMENT BY 1
	MINVALUE 1
	MAXVALUE 2147483647
	START 1
	CACHE 1
	NO CYCLE;
-- DROP SEQUENCE "FeedingSchedules_Id_seq";

CREATE SEQUENCE "FeedingSchedules_Id_seq"
	INCREMENT BY 1
	MINVALUE 1
	MAXVALUE 2147483647
	START 1
	CACHE 1
	NO CYCLE;
-- DROP SEQUENCE "KoiFishes_Id_seq";

CREATE SEQUENCE "KoiFishes_Id_seq"
	INCREMENT BY 1
	MINVALUE 1
	MAXVALUE 2147483647
	START 1
	CACHE 1
	NO CYCLE;
-- DROP SEQUENCE "PondStatuses_Id_seq";

CREATE SEQUENCE "PondStatuses_Id_seq"
	INCREMENT BY 1
	MINVALUE 1
	MAXVALUE 2147483647
	START 1
	CACHE 1
	NO CYCLE;
-- DROP SEQUENCE "Ponds_Id_seq";

CREATE SEQUENCE "Ponds_Id_seq"
	INCREMENT BY 1
	MINVALUE 1
	MAXVALUE 2147483647
	START 1
	CACHE 1
	NO CYCLE;-- public."AspNetRoles" definition

-- Drop table

-- DROP TABLE "AspNetRoles";

CREATE TABLE "AspNetRoles" (
	"Id" uuid NOT NULL,
	"Description" varchar(250) NOT NULL,
	"Name" varchar(256) NULL,
	"NormalizedName" varchar(256) NULL,
	"ConcurrencyStamp" text NULL,
	CONSTRAINT "PK_AspNetRoles" PRIMARY KEY ("Id")
);
CREATE UNIQUE INDEX "RoleNameIndex" ON public."AspNetRoles" USING btree ("NormalizedName");


-- public."AspNetUsers" definition

-- Drop table

-- DROP TABLE "AspNetUsers";

CREATE TABLE "AspNetUsers" (
	"Id" uuid NOT NULL,
	"FirstName" varchar(250) NOT NULL,
	"LastName" varchar(250) NOT NULL,
	"UserName" varchar(256) NULL,
	"NormalizedUserName" varchar(256) NULL,
	"Email" varchar(256) NULL,
	"NormalizedEmail" varchar(256) NULL,
	"EmailConfirmed" bool NOT NULL,
	"PasswordHash" text NULL,
	"SecurityStamp" text NULL,
	"ConcurrencyStamp" text NULL,
	"PhoneNumber" text NULL,
	"PhoneNumberConfirmed" bool NOT NULL,
	"TwoFactorEnabled" bool NOT NULL,
	"LockoutEnd" timestamptz NULL,
	"LockoutEnabled" bool NOT NULL,
	"AccessFailedCount" int4 NOT NULL,
	CONSTRAINT "PK_AspNetUsers" PRIMARY KEY ("Id")
);
CREATE INDEX "EmailIndex" ON public."AspNetUsers" USING btree ("NormalizedEmail");
CREATE UNIQUE INDEX "UserNameIndex" ON public."AspNetUsers" USING btree ("NormalizedUserName");


-- public."__EFMigrationsHistory" definition

-- Drop table

-- DROP TABLE "__EFMigrationsHistory";

CREATE TABLE "__EFMigrationsHistory" (
	"MigrationId" varchar(150) NOT NULL,
	"ProductVersion" varchar(32) NOT NULL,
	CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);


-- public."AspNetRoleClaims" definition

-- Drop table

-- DROP TABLE "AspNetRoleClaims";

CREATE TABLE "AspNetRoleClaims" (
	"Id" int4 GENERATED BY DEFAULT AS IDENTITY( INCREMENT BY 1 MINVALUE 1 MAXVALUE 2147483647 START 1 CACHE 1 NO CYCLE) NOT NULL,
	"RoleId" uuid NOT NULL,
	"ClaimType" text NULL,
	"ClaimValue" text NULL,
	CONSTRAINT "PK_AspNetRoleClaims" PRIMARY KEY ("Id"),
	CONSTRAINT "FK_AspNetRoleClaims_AspNetRoles_RoleId" FOREIGN KEY ("RoleId") REFERENCES "AspNetRoles"("Id") ON DELETE CASCADE
);
CREATE INDEX "IX_AspNetRoleClaims_RoleId" ON public."AspNetRoleClaims" USING btree ("RoleId");


-- public."AspNetUserClaims" definition

-- Drop table

-- DROP TABLE "AspNetUserClaims";

CREATE TABLE "AspNetUserClaims" (
	"Id" int4 GENERATED BY DEFAULT AS IDENTITY( INCREMENT BY 1 MINVALUE 1 MAXVALUE 2147483647 START 1 CACHE 1 NO CYCLE) NOT NULL,
	"UserId" uuid NOT NULL,
	"ClaimType" text NULL,
	"ClaimValue" text NULL,
	CONSTRAINT "PK_AspNetUserClaims" PRIMARY KEY ("Id"),
	CONSTRAINT "FK_AspNetUserClaims_AspNetUsers_UserId" FOREIGN KEY ("UserId") REFERENCES "AspNetUsers"("Id") ON DELETE CASCADE
);
CREATE INDEX "IX_AspNetUserClaims_UserId" ON public."AspNetUserClaims" USING btree ("UserId");


-- public."AspNetUserLogins" definition

-- Drop table

-- DROP TABLE "AspNetUserLogins";

CREATE TABLE "AspNetUserLogins" (
	"LoginProvider" text NOT NULL,
	"ProviderKey" text NOT NULL,
	"ProviderDisplayName" text NULL,
	"UserId" uuid NOT NULL,
	CONSTRAINT "PK_AspNetUserLogins" PRIMARY KEY ("LoginProvider", "ProviderKey"),
	CONSTRAINT "FK_AspNetUserLogins_AspNetUsers_UserId" FOREIGN KEY ("UserId") REFERENCES "AspNetUsers"("Id") ON DELETE CASCADE
);
CREATE INDEX "IX_AspNetUserLogins_UserId" ON public."AspNetUserLogins" USING btree ("UserId");


-- public."AspNetUserRoles" definition

-- Drop table

-- DROP TABLE "AspNetUserRoles";

CREATE TABLE "AspNetUserRoles" (
	"UserId" uuid NOT NULL,
	"RoleId" uuid NOT NULL,
	CONSTRAINT "PK_AspNetUserRoles" PRIMARY KEY ("UserId", "RoleId"),
	CONSTRAINT "FK_AspNetUserRoles_AspNetRoles_RoleId" FOREIGN KEY ("RoleId") REFERENCES "AspNetRoles"("Id") ON DELETE CASCADE,
	CONSTRAINT "FK_AspNetUserRoles_AspNetUsers_UserId" FOREIGN KEY ("UserId") REFERENCES "AspNetUsers"("Id") ON DELETE CASCADE
);
CREATE INDEX "IX_AspNetUserRoles_RoleId" ON public."AspNetUserRoles" USING btree ("RoleId");


-- public."AspNetUserTokens" definition

-- Drop table

-- DROP TABLE "AspNetUserTokens";

CREATE TABLE "AspNetUserTokens" (
	"UserId" uuid NOT NULL,
	"LoginProvider" text NOT NULL,
	"Name" text NOT NULL,
	"Value" text NULL,
	CONSTRAINT "PK_AspNetUserTokens" PRIMARY KEY ("UserId", "LoginProvider", "Name"),
	CONSTRAINT "FK_AspNetUserTokens_AspNetUsers_UserId" FOREIGN KEY ("UserId") REFERENCES "AspNetUsers"("Id") ON DELETE CASCADE
);


-- public."Ponds" definition

-- Drop table

-- DROP TABLE "Ponds";

CREATE TABLE "Ponds" (
	"Id" int4 GENERATED BY DEFAULT AS IDENTITY( INCREMENT BY 1 MINVALUE 1 MAXVALUE 2147483647 START 1 CACHE 1 NO CYCLE) NOT NULL,
	"Name" varchar(100) NOT NULL,
	"Size" float8 NOT NULL,
	"Depth" float8 NOT NULL,
	"WaterQuality" varchar(50) NOT NULL,
	"UserId" uuid NOT NULL,
	"CreatedAt" timestamp NOT NULL,
	"CreatedBy" text NULL,
	"UpdatedAt" timestamp NOT NULL,
	"UpdatedBy" text NULL,
	CONSTRAINT "PK_Ponds" PRIMARY KEY ("Id"),
	CONSTRAINT "FK_Ponds_AspNetUsers_UserId" FOREIGN KEY ("UserId") REFERENCES "AspNetUsers"("Id") ON DELETE CASCADE
);
CREATE INDEX "IX_Ponds_UserId" ON public."Ponds" USING btree ("UserId");


-- public."FeedingSchedules" definition

-- Drop table

-- DROP TABLE "FeedingSchedules";

CREATE TABLE "FeedingSchedules" (
	"Id" int4 GENERATED BY DEFAULT AS IDENTITY( INCREMENT BY 1 MINVALUE 1 MAXVALUE 2147483647 START 1 CACHE 1 NO CYCLE) NOT NULL,
	"FeedingTime" timestamp NOT NULL,
	"FoodType" varchar(50) NOT NULL,
	"Quantity" int4 NOT NULL,
	"PondId" int4 NOT NULL,
	"CreatedAt" timestamp NOT NULL,
	"CreatedBy" text NULL,
	"UpdatedAt" timestamp NOT NULL,
	"UpdatedBy" text NULL,
	CONSTRAINT "PK_FeedingSchedules" PRIMARY KEY ("Id"),
	CONSTRAINT "FK_FeedingSchedules_Ponds_PondId" FOREIGN KEY ("PondId") REFERENCES "Ponds"("Id") ON DELETE CASCADE
);
CREATE INDEX "IX_FeedingSchedules_PondId" ON public."FeedingSchedules" USING btree ("PondId");


-- public."KoiFishes" definition

-- Drop table

-- DROP TABLE "KoiFishes";

CREATE TABLE "KoiFishes" (
	"Id" int4 GENERATED BY DEFAULT AS IDENTITY( INCREMENT BY 1 MINVALUE 1 MAXVALUE 2147483647 START 1 CACHE 1 NO CYCLE) NOT NULL,
	"Name" varchar(20) NOT NULL,
	"Color" varchar(20) NOT NULL,
	"Size" float8 NOT NULL,
	"Origin" varchar(50) NOT NULL,
	"HealthStatus" varchar(20) NOT NULL,
	"PondId" int4 NOT NULL,
	"CreatedAt" timestamp NOT NULL,
	"CreatedBy" text NULL,
	"UpdatedAt" timestamp NOT NULL,
	"UpdatedBy" text NULL,
	CONSTRAINT "PK_KoiFishes" PRIMARY KEY ("Id"),
	CONSTRAINT "FK_KoiFishes_Ponds_PondId" FOREIGN KEY ("PondId") REFERENCES "Ponds"("Id") ON DELETE CASCADE
);
CREATE INDEX "IX_KoiFishes_PondId" ON public."KoiFishes" USING btree ("PondId");


-- public."PondStatuses" definition

-- Drop table

-- DROP TABLE "PondStatuses";

CREATE TABLE "PondStatuses" (
	"Id" int4 GENERATED BY DEFAULT AS IDENTITY( INCREMENT BY 1 MINVALUE 1 MAXVALUE 2147483647 START 1 CACHE 1 NO CYCLE) NOT NULL,
	"Temperature" float4 NOT NULL,
	"PHLevel" float4 NOT NULL,
	"WaterLevel" float4 NOT NULL,
	"RecordedAt" timestamp NOT NULL,
	"PondId" int4 NOT NULL,
	"CreatedAt" timestamp NOT NULL,
	"CreatedBy" text NULL,
	"UpdatedAt" timestamp NOT NULL,
	"UpdatedBy" text NULL,
	CONSTRAINT "PK_PondStatuses" PRIMARY KEY ("Id"),
	CONSTRAINT "FK_PondStatuses_Ponds_PondId" FOREIGN KEY ("PondId") REFERENCES "Ponds"("Id") ON DELETE CASCADE
);
CREATE INDEX "IX_PondStatuses_PondId" ON public."PondStatuses" USING btree ("PondId");
